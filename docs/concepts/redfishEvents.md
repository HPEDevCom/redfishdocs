---
seo:
  title: The Redfish Event Service
toc:
  enable: false
  maxDepth: 3
disableLastModified: false
---

# The Redfish Event Service

Redfish standardizes an event subscription service that enables Redfish clients to receive notifications when the REST data changes or when certain alerts occur. These notifications are HTTPS POST operations sent to a listener URL of your choice.

The `EventService` resource type is located in the Redfish data model at `/redfish/v1/EventService/` This resource includes a link to the collection of subscriptions referred as `EventDestinationCollection` and located at the `/redfish/v1/EventService/Subscriptions` URI.

## Subscribing for Events

In order to receive events, you must identify the URL of an HTTPS server accepting POST requests and accessible to the BMC management network. Event POST operations generated by the BMC will be sent to this event listener URL after successful subscription.

:::success TIP
If needed, The DMTF provides a Redfish Event Listener on <a href="https://github.com/DMTF/Redfish-Event-Listener" target="_blank">GitHub</a>.
:::

Then, you need to construct a JSON object and POST it to the `EventDestinationCollection` URI of the managed BMC. Upon success, you receive an HTTP 201 Created response and a new subscription has been added in the collection.

:::info NOTE
Most of the BMC Redfish event services (including iLO and OpenBMC) does not test the event listener destination URL during the subscription phase.
:::

The following example creates an event subscription in an iLO 6, with the `Destination` property as the only property part of the request body.

```text Generic event subscription request
POST /redfish/v1/EventService/Subscriptions/
```

```json Request body
{
    "Destination": "https://{{EventListener}}/path/to/listener.app"
}
```

```json Response body
{
    "error": {
        "code": "iLO.0.10.ExtendedInfo",
        "message": "See @Message.ExtendedInfo for more information.",
        "@Message.ExtendedInfo": [
            {
                "MessageId": "Base.1.12.Created"
            }
        ]
    }
}
```

Once the subscription is created, its URI appears in the `EventDestinationCollection` collection. If the creation request does not provide any value for the `RegistryPrefixes` and the `Oem/Hpe` resources, Redfish service may fill them up with default values.

The `RegistryPrefixes` property is a list of the message registry prefixes to subscribe to. The supported list of `RegistryPrefixes` is part of the `EventService` [URI](/docs/redfishservices/ilos/ilo6/ilo6_{{process.env.LATEST_FW_VERSION}}/ilo6_other_resourcedefns{{process.env.LATEST_FW_VERSION}}/#eventservice).

:::info NOTE

Message registries like the [iLO 6 message registry](/docs/redfishservices/ilos/ilo6/ilo6_{{process.env.LATEST_FW_VERSION}}/ilo6_msgregs{{process.env.LATEST_FW_VERSION}}/) contain elements of the form: `<MessageRegistryPrefix>.<MajorVersion>.<MinorVersion>.<MessageKey>`.

:::

:::success TIP

Redfish clients can access registry files by following the links provided in the `MessageRegistryFileCollection` collection at `/redfish/v1/Registries`.

:::

When an event occurs in a server, a `MessageId` property is associated to it. Its value is a message reference (i.e. `iLOResourceEvents.1.3.DrvArrLogDrvErasing`) described in the [message registry](/docs/redfishservices/ilos/{{process.env.LATEST_ILO_GEN_VERSION}}/{{process.env.LATEST_ILO_GEN_VERSION}}_{{process.env.LATEST_FW_VERSION}}/{{process.env.LATEST_ILO_GEN_VERSION}}_msgregs{{process.env.LATEST_FW_VERSION}}/#iloresourceevents13drvarrlogdrverasing). Only event destinations containing the message registry prefix of the `MessageId` property are notified. Upon reception, they can consult the message registry to get more detail and optionally resolution actions.

The following example retrieves the list of event subscriptions and the content of the subscription created in the previous example.

```text List of event subscriptions
GET /redfish/v1/EventService/Subscriptions/
```

```json Event destination collection
{
    "@odata.context": "/redfish/v1/$metadata#EventDestinationCollection.EventDestinationCollection",
    "@odata.etag": "W/\"AA6D42B0\"",
    "@odata.id": "/redfish/v1/EventService/Subscriptions/",
    "@odata.type": "#EventDestinationCollection.EventDestinationCollection",
    "Description": "iLO User Event Subscriptions",
    "Name": "EventSubscriptions",
    "Members": [
        {
            "@odata.id": "/redfish/v1/EventService/Subscriptions/6/"
        }
    ],
    "Members@odata.count": 1
}
```

```json Subscription details
{
    "@odata.context": "/redfish/v1/$metadata#EventDestination.EventDestination",
    "@odata.etag": "W/\"2CCBBA1F\"",
    "@odata.id": "/redfish/v1/EventService/Subscriptions/6/",
    "@odata.type": "#EventDestination.v1_0_0.EventDestination",
    "Id": "6",
    "Context": "",
    "Description": "iLO Event Subscription",
    "Destination": "https://{{EventListener}}/path/to/listener.app",
    "HttpHeaders": [],
    "Name": "Event Subscription",
    "Oem": {
        "Hpe": {
            "@odata.context": "/redfish/v1/$metadata#HpeEventDestination.HpeEventDestination",
            "@odata.type": "#HpeEventDestination.v2_1_0.HpeEventDestination",
            "DeliveryRetryAttempts": 3,
            "DeliveryRetryIntervalInSeconds": 30,
            "MutualAuthenticationEnabled": false,
            "RequestedMaxEventsToQueue": 3,
            "RetireOldEventInMinutes": 10
        }
    },
    "Protocol": "Redfish",
    "RegistryPrefixes": [
        "NetworkDevice",
        "StorageDevice",
        "ResourceEvent",
        "iLOEvents",
        "iLOResourceEvents"
    ]
}
```

The Event Service offers the possibility to send test events to managed BMCs. The following test event, with `MessageId` containing `iLOResourceEvents`, will be forwarded to all the subscription destinations having `iLOResourceEvents` in its `RegistryPrefixes` list.

```text POST test event
POST /redfish/v1/EventService/Actions/EventService.SubmitTestEvent
```

```json Test event body
{
  
  "EventID": "myEventId",
  "EventTimestamp": "2023-02-13T14:49:20Z",
  "Severity": "Warning",
  "Message": "This is a test event message",
  "MessageId": "iLOResourceEvents.1.2.DrvArrLogDrvErasing",
  "MessageArgs": [ "1", "slot 3" ],
  "OriginOfCondition": "/redfish/v1/Systems/1/Storage"
}

```

```json Response body
{
    "error": {
        "code": "iLO.0.10.ExtendedInfo",
        "message": "See @Message.ExtendedInfo for more information.",
        "@Message.ExtendedInfo": [
            {
                "MessageId": "Base.1.12.Success"
            }
        ]
    }
}
```

The following example shows an event subscription with three `RegistryPrefixes`, two specific `HttpHeaders` and customized `Oem/Hpe` properties. The `HttpHeaders` resource contains a list of HTTP headers that the Redfish service will use when sending events to the event listener. This property can be used to perform an authentication in the event listener.

:::info NOTE

The <a href="https://www.dmtf.org/sites/default/files/standards/documents/DSP0268_2022.3.pdf" target="_blank">Redfish specification</a> advises to return an empty `HttpHeaders` array upon GET requests. Refer to the Subscription detail tabulation of the following example.

:::

The following example contains as well a `Context` property. It is a string that will be in events sent to the listener. With this information the listener could dispatch the event to a specific service able to act accordingly.

```json Subscription request body
{
    "Destination": "https://{{EventListener}}/",
    "RegistryPrefixes": [
        "iLOEvents",
        "iLOResourceEvents",
        "ResourceEvent"
    ],
    "Context": "ContextString",
    "HttpHeaders": {
        "X-Auth-Token": "{{Token}}",
        "Odata-Version": "4.0"
    },
    "Oem": {
        "Hpe": {
            "DeliveryRetryIntervalInSeconds": 10,
            "RequestedMaxEventsToQueue": 20,
            "DeliveryRetryAttempts": 2,
            "RetireOldEventInMinutes": 10
        }
    }
}
```

```json Subscription detail
{
    "@odata.context": "/redfish/v1/$metadata#EventDestination.EventDestination",
    "@odata.etag": "W/\"5C98713E\"",
    "@odata.id": "/redfish/v1/EventService/Subscriptions/11/",
    "@odata.type": "#EventDestination.v1_0_0.EventDestination",
    "Id": "11",
    "Context": "ContextString",
    "Description": "iLO Event Subscription",
    "Destination": "https://10.124.99.192/",
    "HttpHeaders": [],
    "Name": "Event Subscription",
    "Oem": {
        "Hpe": {
            "@odata.context": "/redfish/v1/$metadata#HpeEventDestination.HpeEventDestination",
            "@odata.type": "#HpeEventDestination.v2_1_0.HpeEventDestination",
            "DeliveryRetryAttempts": 2,
            "DeliveryRetryIntervalInSeconds": 10,
            "MutualAuthenticationEnabled": false,
            "RequestedMaxEventsToQueue": 20,
            "RetireOldEventInMinutes": 10
        }
    },
    "Protocol": "Redfish",
    "RegistryPrefixes": [
        "iLOEvents",
        "iLOResourceEvents",
        "ResourceEvent"
    ]
}
```
